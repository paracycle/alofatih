function capitalize(a){return a.replace(first_char,function(a){return a.toUpperCase()})}function upgrade(){$(".upgrade").removeClass("hide"),$(".call-button").addClass("hide")}function hideWarning(){$(".allow").addClass("hide")}function showWarning(){$(".allow").removeClass("hide")}function startRecognition(){stopRecognition(),showWarning(),recognition.start()}function stopRecognition(){isConnected=!1,hideWarning(),recognition.stop(),clearTimeout(queueCallback)}function transcript(a,b){console.log(b),$(".transcript").append('<div class="transcript-line"><span class="speaker">'+a+" : -</span> "+b+"</div>")}function play(a){a.src&&(transcript("FATIH",a.transcript),a=a.src);var b=new Howl({urls:[audioRoot+a+".mp3",audioRoot+a+".wav"]});return b.play(),b}function playRandom(){var a=sounds[Math.floor(Math.random()*sounds.length)];return play(a)}function queueRandomAudio(){var a=1e3*(4*Math.random()+5);queueCallback=setTimeout(function(){isConnected&&(playRandom(),queueRandomAudio())},a)}var queueCallback=null,isConnected=!1,format=".mp3",audioRoot="audio/",efendim={src:"efendim",transcript:"Efendim?"},ringback="ringback_tone",sounds=[{src:"anladim-efeem",transcript:"Anladım efendim..."},{src:"anladim-efendim",transcript:"Anladım efendim."},{src:"anlasilmistir-efeem",transcript:"Anlaşılmıştır efendim...."},{src:"anlasilmistir-efendim",transcript:"Anlaşılmıştır efendim."},{src:"bizim-e-bizim-e-bizim-ayibimiz",transcript:"Bizim, eee, bizim, eee bizim ayıbımız..."},{src:"bu-bi-ayiptir",transcript:"Bu bir ayıptır."},{src:"dogrudur-efendim",transcript:"Doğrudur efendim"},{src:"emriniz-olur",transcript:"Emriniz olur"},{src:"evdeydim-1-dakika-musaade-ederseniz",transcript:"Evdeydim 1 dakika müsaade ederseniz efendim..."},{src:"hic-hic-tereddut-yok-efeem",transcript:"Hiç, hiç tereddüt yok efendim..."},{src:"kestiriyorum-efendim",transcript:"Kestiriyorum efendim."},{src:"simdi-2-3-dakikaya-kestiriyorum",transcript:"Simdi; 2-3 dakikaya kestiriyorum."},{src:"tamam-efendim-simdi-kestiriyorum-efendim",transcript:"Tamam efendim. Şimdi kestiriyorum efendim."},{src:"tamam-emriniz-olur-efeem",transcript:"Tamam, emriniz olur efendim."},{src:"tekerrur-etmeyecektir-efendim",transcript:"Tekerrür etmeyecek efendim."}];if("webkitSpeechRecognition"in window){var recognition=new webkitSpeechRecognition;recognition.continuous=!0,recognition.interimResults=!1,recognition.lang="tr-TR",recognition.onstart=function(){isConnected=!0,hideWarning(),$(".call-button").removeClass("start").addClass("stop").removeClass("btn-success").addClass("btn-danger"),ringback_player.stop(),play(efendim),queueRandomAudio()},recognition.onresult=function(a){for(var b="",c=a.resultIndex;c<a.results.length;++c)b+=a.results[c][0].transcript;transcript("SIZ",capitalize(b))},recognition.onerror=function(a){console.log("Error: ",a),"not-allowed"==a.error?(ringback_player.stop(),stopRecognition()):setTimeout(function(){startRecognition()},1e3)},recognition.onend=function(){console.log("Ended")}}else upgrade();var first_char=/\S/;$("body").on("click",".call-button.start",function(a){ringback_player=play(ringback),ringback_player.loop(!0),startRecognition()}),$("body").on("click",".call-button.stop",function(a){stopRecognition(),$(".call-button").addClass("start").removeClass("stop").addClass("btn-success").removeClass("btn-danger")});